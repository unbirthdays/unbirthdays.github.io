"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4729,1623],{95956:function(e,t,n){var r,o=n(2784);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=function(e){return o.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),r||(r=o.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10.222v3.556m4.5-7.111v10.666M12 4v16m4.5-13.333v10.666m4.5-7.11v3.555",vectorEffect:"non-scaling-stroke"})))};t.Z=l},396:function(e,t,n){var r,o,i=n(2784);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a=function(e){return i.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),r||(r=i.createElement("rect",{width:5.179,height:16.5,x:5,y:4,fill:"currentColor",rx:2.589})),o||(o=i.createElement("rect",{width:5.179,height:16.5,x:14.321,y:4,fill:"currentColor",rx:2.589})))};t.Z=a},27377:function(e,t,n){var r,o=n(2784);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=function(e){return o.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"},e),r||(r=o.createElement("path",{d:"M4.5 4.566c0-1.562 1.71-2.52 3.043-1.706l12.164 7.433c1.277.78 1.277 2.634 0 3.414L7.543 21.14c-1.333.815-3.043-.144-3.043-1.706V4.566Z",vectorEffect:"non-scaling-stroke"})))};t.Z=l},6867:function(e,t,n){var r,o,i=n(2784);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a=function(e){return i.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e),r||(r=i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 3.5v4.713h-4.685",vectorEffect:"non-scaling-stroke"})),o||(o=i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.524 8.213c-1.402-2.584-4.127-4.338-7.26-4.338C7.7 3.875 4 7.597 4 12.188c0 4.59 3.7 8.312 8.264 8.312 3.469 0 6.438-2.15 7.664-5.195",vectorEffect:"non-scaling-stroke"})))};t.Z=a},34347:function(e,t,n){var r,o=n(2784);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=function(e){return o.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),r||(r=o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.707 1.293a1 1 0 0 0-1.414 1.414l20 20a1 1 0 0 0 1.414-1.414l-1.944-1.944a14.2 14.2 0 0 0 2.037-7.35c0-3.104-.994-5.98-2.68-8.323a1.099 1.099 0 0 0-1.783 1.282A12.008 12.008 0 0 1 20.603 12a12.01 12.01 0 0 1-1.45 5.74l-1.6-1.6A8.742 8.742 0 0 0 18.59 12a8.742 8.742 0 0 0-1.576-5.018 1.099 1.099 0 0 0-1.801 1.255A6.548 6.548 0 0 1 16.393 12a6.56 6.56 0 0 1-.487 2.491L13.2 11.786v-8.47c0-1.29-1.521-1.978-2.49-1.126L6.928 5.515 2.707 1.293Zm-1.27 6.165c.167-.348.413-.644.713-.863l11.05 11.05v3.038c0 1.29-1.521 1.979-2.49 1.127l-4.316-3.795s-.151-.161-.19-.198l-.002-.003h-.004a6.564 6.564 0 0 0-.266-.003h-1.93c-.276 0-.544 0-.771-.02a2.099 2.099 0 0 1-.84-.233 2.258 2.258 0 0 1-.953-1.016 2.472 2.472 0 0 1-.22-.895c-.018-.242-.018-.527-.018-.82V9.173c0-.294 0-.58.018-.821.02-.266.069-.58.22-.895Z",clipRule:"evenodd"})))};t.Z=l},29578:function(e,t,n){var r,o=n(2784);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=function(e){return o.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),r||(r=o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.2 3.317c0-1.29-1.521-1.979-2.49-1.127L6.393 5.985a6.948 6.948 0 0 1-.19.198l-.002.003h-.004a6.337 6.337 0 0 1-.266.003h-1.93c-.276 0-.544 0-.77.02-.25.022-.545.073-.84.233-.411.223-.745.579-.954 1.016-.151.316-.2.63-.22.895-.018.242-.018.527-.018.82V14.827c0 .294 0 .58.019.821.02.266.068.58.219.895.209.437.543.793.953 1.015.296.161.59.213.84.234.227.02.495.02.77.02h1.93c.143 0 .215 0 .267.003h.004l.002.003c.039.037.19.198.19.198l4.316 3.795c.968.852 2.49.164 2.49-1.127V3.317Zm5.387.109a1.099 1.099 0 0 1 1.533.25A14.203 14.203 0 0 1 22.8 12c0 3.105-.994 5.981-2.68 8.324a1.099 1.099 0 0 1-1.783-1.282A12.008 12.008 0 0 0 20.603 12c0-2.63-.84-5.06-2.266-7.042a1.097 1.097 0 0 1 .25-1.532Zm-3.102 3.283a1.099 1.099 0 0 1 1.53.273A8.742 8.742 0 0 1 18.59 12a8.742 8.742 0 0 1-1.576 5.018 1.099 1.099 0 0 1-1.801-1.256A6.548 6.548 0 0 0 16.393 12c0-1.4-.436-2.696-1.18-3.763a1.097 1.097 0 0 1 .272-1.528Z",clipRule:"evenodd"})))};t.Z=l},8518:function(e,t,n){n.d(t,{Z:function(){return C}});var r=n(66383),o=n(52322);n(97340);var i=n(60845),l=n(13317),a=n(67337),s=n(95956),u=n(396),c=n(27377),d=n(2784),p=n(24886),f=n(37052),v=n(53476),h=n(97818),g=n(49748),m=n(60058),x=n(79830),y=n.n(x),b=n(63072),w=n(71869);function C(e){var t=e.url,n=e.loading,r=e.size,l=void 0===r?b.Ph.xl:r,a=e.showTooltip,s=e.playDelay,u=e.generateVoice,c=e.tracker;return(0,o.jsx)(b.zx,{buttonType:b.qh.secondary,buttonSize:l,loading:n,className:(0,i.cn)("rounded-full bg-white border border-gray-300 p-0 flex items-center justify-center",{"w-9 h-9 hover:border-gray-400":l===b.Ph.sm,"w-10 h-10 border-none shadow-menu animate-scaleDownUp":l===b.Ph.md,"w-16 h-16 border-none shadow-menu animate-scaleDownUp":l===b.Ph.xl}),style:(0,m.m)(m.KN.AudioPlayerButton),children:(0,o.jsx)(j,{audioUrl:t,size:l,playDelay:s,showTooltip:a,generateVoice:u,tracker:c})})}function j(e){var t,n=e.audioUrl,a=e.showTooltip,u=e.size,c=void 0===u?b.Ph.xl:u,p=e.playDelay,m=e.generateVoice,x=e.tracker,y=(0,v.sJ)(g.H.isMuted),C=(0,v.Zl)(g.H.isVoiceoverPlaying),j=(0,r.Z)((0,f.Z)({src:null!=n?n:""}),4),S=j[0],Z=j[1],T=j[2],N=j[3],E=(0,l.D)(n);(0,d.useEffect)(function(){E!==n&&setTimeout(function(){T.play(),null==x||x.report("Synthetic Voice Played",{})},null!=p?p:0)},[E,n,T,p,Z.playing,x]),(0,d.useEffect)(function(){C(Z.playing)},[Z.playing,C]),(0,d.useEffect)(function(){S&&(y?T.mute():T.unmute())},[S,T,y]);var I=function(){n?Z.playing?(T.pause(),null==x||x.report("Synthetic Voice Paused",{})):(T.play(),null==x||x.report("Synthetic Voice Played",{})):null==m||m()};return(0,o.jsx)(w.Z,{content:(0,o.jsxs)("span",{children:[(0,h.tq)()?"Tap":"Click"," to play voiceover"," ",(0,o.jsx)(s.Z,{className:"h-4 w-4 inline"})]}),text:"",placement:"left",disabled:Z.playing||!a,offset:[0,12],children:(0,o.jsxs)("div",{className:(0,i.cn)({"h-7 w-7":c===b.Ph.sm,"h-[36px] w-[36px]":c===b.Ph.md,"h-[56px] w-[56px]":c===b.Ph.xl}),onClick:I,children:[S,(0,o.jsx)(k,{isPlaying:(null===(t=N.current)||void 0===t?void 0:t.paused)===!1,duration:Z.duration,audioEl:N,shouldReset:E!==n})]})})}function k(e){var t=e.isPlaying,n=e.duration,r=e.audioEl,i=e.shouldReset,l=(0,d.useState)(0),s=l[0],f=l[1];return(0,a.n)(function(){n&&f(function(e){return e+10/n})},t?100:void 0),(0,d.useEffect)(function(){var e;n&&(null==r?void 0:r.current)&&(!t&&n-(null===(e=r.current)||void 0===e?void 0:e.currentTime)==0||i)&&f(0)},[r,n,t,s,i]),(0,o.jsx)(p.Wo,{className:"important",value:s,strokeWidth:6,styles:{root:{width:"100%",height:"100%"},path:{stroke:y().primary.action},trail:{stroke:y().blue[50]}},children:t?(0,o.jsx)(u.Z,{}):(0,o.jsx)(c.Z,{})})}},76261:function(e,t,n){n.d(t,{Z:function(){return eZ}});var r,o,i,l=n(98788),a=n(42838),s=n(70865),u=n(96670),c=n(66383),d=n(5163),p=n(52322),f=n(60845),v=n(269),h=n(92642),g=n(25237),m=n.n(g),x=n(2784),y=n(53476),b=n(97818),w=n(49748);function C(e){return 1e3*Math.max(2.5*e*.03,2.5)}var j=n(64989),k=n(80537),S=n.n(k),Z=n(78646),T=n(16283),N=n(15529),E=n(76790),I=n(60058),O=n(841),R=n.n(O),M=n(79984);function z(){return(z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var A=function(e){return x.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),r||(r=x.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m18 15-6-6-6 6",vectorEffect:"non-scaling-stroke"})))},H=n(6867),F=n(34883),P=n(79826);function B(e){var t,n=e.hotspot,r=e.navToNextStep,o=e.replay,i=(0,j.u)(),l=i.flow,a=i.activeStep,c=(0,y.sJ)(w.H.navInfo),d=(0,x.useMemo)(function(){return(0,N.q)(l)},[l]),v=d.buttonBgColor,h=d.buttonFgColor,g=(null==n?void 0:n.label)||"",m=(null==n?void 0:n.bgColor)||v,C=(null==n?void 0:n.textColor)||h,k=(0,x.useRef)(null),S=(0,x.useState)(0),Z=S[0],T=S[1],E=(0,x.useState)(!1),O=E[0],z=E[1],B=!(0===g.length||!k.current||(null===(t=k.current)||void 0===t?void 0:t.clientHeight)===18);return(0,x.useEffect)(function(){var e;B&&T(((null===(e=k.current)||void 0===e?void 0:e.clientHeight)||0)+18)},[g,O,B]),(0,x.useEffect)(function(){return z(!1)},[a]),(0,p.jsxs)("div",(0,u.Z)((0,s.Z)({},(0,F.v)("Caption")),{className:(0,f.cn)("absolute -bottom-10 left-0 right-0 h-10 w-full transition-all ease flex justify-center rounded-b-lg select-none",{"items-start":!O,"items-center":O}),style:{backgroundColor:m,color:C,zIndex:(0,I.LM)(I.KN.Caption),height:O?Z:P.zI},onMouseOver:function(){!(0,b.tq)()&&B&&z(!0)},onMouseLeave:function(){!(0,b.tq)()&&B&&z(!1)},onClick:function(){(0,b.tq)()&&B&&z(!O)},children:[(0,p.jsx)("div",{className:(0,f.cn)("absolute w-7 h-5 flex items-center justify-center -top-5 rounded-t-lg cursor-pointer",{hidden:!B}),style:{backgroundColor:m,color:C},children:(0,p.jsx)(A,{className:(0,f.cn)("w-4 h-4 transition-all origin-center",{"!rotate-180":O})})}),(0,p.jsx)("div",{className:"flex-none font-bold text-xs h-10 w-10 flex items-center justify-center",children:"".concat(c.stepIndex+1,"/").concat(c.stepCount)}),(0,p.jsxs)("div",{className:(0,f.cn)("flex-grow h-10 py-[10px] relative",{"flex items-center":O,"h-10 overflow-hidden":!O}),children:[(0,p.jsx)("div",{className:(0,f.cn)("absolute transition-all bottom-0 right-0 left-0 w-full h-3 select-none pointer-events-none",{"opacity-0":O,"opacity-50":!O}),style:{backgroundColor:m}}),(0,p.jsx)("div",{ref:k,className:(0,f.cn)("text-sm select-none leading-[18px]",{"h-5":0===g.length,"mt-[1px]":!O}),children:(0,p.jsx)(R(),{markdown:g,preventLineBreaks:!0})})]}),(0,p.jsx)("div",{className:"w-10 h-10 cursor-pointer flex-none flex items-center justify-center",onClick:function(){c.stepIndex+1!==c.stepCount?r():o()},children:c.stepIndex+1!==c.stepCount?(0,p.jsx)(M.Z,{className:"h-6 w-6"}):(0,p.jsx)(H.Z,{className:"h-5 w-5"})})]}))}n(80754);var L=n(33252),D=n(42349),U=n(90258),W=n(56873),V=n(53994),_=n(11761),q=m()(function(){return Promise.all([n.e(7720),n.e(3439)]).then(n.bind(n,63439))},{loadableGenerated:{webpack:function(){return[63439]}}}),J=function(e){var t,n=e.callout,r=e.inEditMode,o=e.onCalloutClick,i=e.updateCallout,l=e.deleteCallout,d=e.displayAsCaption,v=e.tracker,h=e.stageRef,g=e.isZoomActive,m=(0,x.useRef)(null),C=(0,j.u)(),k=C.fontFamily,S=C.activeStep,Z=(0,c.Z)((0,y.FV)(w.H.selectedHotspot),2),T=Z[0],N=Z[1],E=(0,y.Zl)(w.H.selectedHotspotIsDirty),O=(0,y.rb)(w.H.selectedHotspot),R=(0,y.sJ)(w.H.showTextFormattingOptions),M=(0,y.sJ)(w.H.stageDimensions),z=(0,y.Zl)(w.H.shake),A=(0,c.Z)((0,y.FV)(w.H.selectingTarget),2),H=A[0],F=A[1],P=(0,y.sJ)(w.H.isAnimationActive),B=(0,y.Zl)(w.H.isHistoryNav),J=(0,x.useState)(T),K=J[0],G=J[1],Y="tippy-".concat(n.id,"-edit"),X="tippy-".concat(n.id,"-view"),$=(0,x.useState)("hide"),Q=$[0],ee=$[1],et=(0,x.useState)(!1),en=et[0],er=et[1],eo=(0,x.useState)({x:0,y:0}),ei=eo[0],el=eo[1],ea=(0,x.useState)({x:0,y:0}),es=ea[0],eu=ea[1],ec=(0,x.useState)(void 0),ed=ec[0],ep=ec[1],ef=!!K&&K.id===n.id;(0,x.useEffect)(function(){G(T)},[T]),(0,x.useEffect)(function(){E(!!(null==K?void 0:K.isDirty))},[null==K?void 0:K.isDirty,E]);var ev=(0,U.z)(function(e){var t;return el({x:e.clientX,y:e.clientY})},[],50);(0,V.s)(ef&&!R,function(e){if((0,a.Z)(e,KeyboardEvent))(null==K?void 0:K.isDirty)?z(!0):O();else{var t=H&&Array.from(document.getElementsByClassName("_step-selector-step")).find(function(t){return t.contains(e.target)});(null==K?void 0:K.isDirty)?t||z(!0):O()}},{keyboardEvents:["Escape"]});var eh=(0,x.useCallback)(function(e){if(ed)return ed;var t=new ResizeObserver(e);return ep(t),t},[ed]),eg=n.x*M.width,em=n.y*M.height,ex=null!==(ek=n.bgColor&&!r?n.bgColor:n.id===(null==K?void 0:K.id)?null==K?void 0:K.bgColor:n.bgColor)&&void 0!==ek?ek:L.defaultUserPrefs.bgColor,ey=null!==(eS=n.id===(null==K?void 0:K.id)?null==K?void 0:K.textColor:n.textColor)&&void 0!==eS?eS:L.defaultUserPrefs.textColor,eb=n.id===(null==K?void 0:K.id)?null==K?void 0:K.label:n.label,ew=r&&!(null==K?void 0:K.isDirty);if(m.current&&h.current&&!g){var eC,ej,ek,eS,eZ,eT,eN=null===(eZ=m.current)||void 0===eZ?void 0:eZ.getBoundingClientRect(),eE=null===(eT=h.current)||void 0===eT?void 0:eT.getBoundingClientRect(),eI=eg+eN.width,eO=em+eN.height;eI>eE.width&&(eg=eg-(eI-eE.width)-10),eO>eE.height&&(em=em-(eO-eE.height)-10)}var eR=function(e){(ee("hide"),r)?(e.stopPropagation(),(null==K||!K.isDirty)&&(ef||N(n))):o&&(e.stopPropagation(),B(!1),o(n))},eM=function(e){if(r){var t,n=null===(t=m.current)||void 0===t?void 0:t.getBoundingClientRect();eu({x:n?e.clientX-n.x:0,y:n?e.clientY-n.y:0}),e.dataTransfer.dropEffect="none",er(!0),ee("hide"),document.addEventListener("dragover",ev)}},ez=function(){var e,t=null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect();if(r&&t){document.removeEventListener("dragover",ev);var o=(0,b.BD)(ei.x-es.x,ei.y-es.y,M,{top:t.top,left:t.left}),l=o.x,a=o.y;i&&i((0,u.Z)((0,s.Z)({},n),{x:(0,b.jz)(l,M),y:(0,b.OW)(a,M)})),setTimeout(function(){er(!1),ee("show")},50)}},eA=function(e){var t;null===(t=e.popperInstance)||void 0===t||t.forceUpdate(),r&&setTimeout(function(){null===(t=e.popperInstance)||void 0===t||t.forceUpdate();var t,n=eh(function(){var t;return null===(t=e.popperInstance)||void 0===t?void 0:t.forceUpdate()}),r=document.querySelector(".".concat(_.Vs));r&&n.observe(r)},50)},eH=function(){var e=document.querySelector(".".concat(_.Vs));e&&(null==ed||ed.unobserve(e))},eF=null;ef&&K&&(eF=(0,p.jsx)(q,{className:(0,f.cn)({hidden:en}),currentHotspot:K,setCurrentHotspot:G,onClose:function(){O(),ee("show"),F(!1)},updateHotspot:i,deleteHotspot:l,tracker:v}));var eP=(0,p.jsx)("div",{className:"select-none",style:{width:"auto",fontFamily:k},children:(0,p.jsx)(D.Callout,{content:eb,textColor:ey,color:ex,inEditMode:r,displayAsCaption:d})});return(0,p.jsxs)("div",{className:"w-full h-full absolute top-0 left-0",children:[(0,p.jsx)("style",{children:"\n        .".concat(X,", .").concat(Y," {\n          background-color: initial;\n          color: initial;\n          border-radius: initial;\n          font-size: initial;\n          outline: initial;\n        }\n        .").concat(X," .tippy-arrow,\n        .").concat(Y," .tippy-arrow {\n          color: transparent !important;\n        }\n        .").concat(X," .tippy-content,\n        .").concat(Y," .tippy-content {\n          padding: 0;\n        }\n        [data-tippy-root] {\n          pointer-events: auto !important;\n        }\n      ")}),(0,p.jsx)("div",{ref:m,className:(0,f.cn)("cursor-pointer absolute flex justify-center items-center",{"transition-transform transform-gpu duration-500 ease delay-100":!r}),"data-transition":"true",style:(0,s.Z)({transformOrigin:"left top",transform:"translate(".concat(eg,"px, ").concat(em,"px) scale(").concat(g?1/((null==S?void 0:null===(eC=S.panAndZoom)||void 0===eC?void 0:eC.enabled)?(null==S?void 0:null===(ej=S.panAndZoom)||void 0===ej?void 0:ej.zoomLevel)||1.5:1):1,")"),zIndex:(0,I.LM)(I.KN.HotspotComponent)},en?{transition:"0.01s",transform:"translateX(-9999px)"}:{}),onClick:eR,draggable:ew,onDragStart:eM,onDragEnd:ez,children:(0,p.jsx)(W.ZP,{visible:ef||"show"===Q||!eF&&!P,interactive:!1,placement:"auto",className:r?Y:X,zIndex:(0,I.LM)(I.KN.HotspotComponent,2),popperOptions:eF?{modifiers:[{name:"flip",options:{fallbackPlacements:["top","bottom","right","left"],boundary:h.current}},{name:"preventOverflow",options:{boundary:h.current,mainAxis:!0,altAxis:!0}},]}:void 0,offset:[0,-10],duration:[null,0],animation:"shift-away",content:eF,onShow:eA,onHide:eH,arrow:!0,appendTo:null!==(t=h.current)&&void 0!==t?t:void 0,plugins:[W.CA],sticky:!0,children:eP})})]})},K=n(57001),G=x.memo(function(e){var t=e.hotspots,n=e.addHotspot,r=e.updateHotspot,o=e.deleteHotspot,i=e.onHotspotClick,l=e.inEditMode,a=e.tracker,u=e.isZoomActive,c=e.zoomStyles,d=e.stageRef,v=(0,y.sJ)(w.H.stageDimensions),h=(0,y.sJ)(w.H.selectedHotspot),g=(0,y.sJ)(w.H.mobileInfo).isScreenSizeSmall,m=(0,x.useRef)(null),C=function(e){if((null==h||!h.isDirty)&&n&&l&&d.current){var t=d.current.getBoundingClientRect();if(t){var r=(0,b.BD)(e.clientX,e.clientY,v,{top:t.top,left:t.left}),o=r.x,i=r.y;n({coords:{x:(0,b.jz)(o,v),y:(0,b.OW)(i,v)}})}}};return(0,p.jsxs)("div",{className:"".concat(_.gq," relative select-none flex w-full h-full"),onDoubleClick:C,style:(0,s.Z)({},c),children:[l&&(0,p.jsx)("div",{ref:m,className:(0,f.cn)("absolute -top-full -left-full -z-1 rounded-full"),style:{width:_.jH,height:_.jH}}),t.map(function(e,t){return"callout"===e.style?(0,p.jsx)(J,{callout:e,onCalloutClick:i,inEditMode:!!l,updateCallout:r,deleteCallout:o,tracker:a,stageRef:d,displayAsCaption:g,isZoomActive:u},t):(0,p.jsx)(K.Z,{hotspot:e,onHotspotClick:i,displayAsCaption:g,inEditMode:!!l,updateHotspot:r,deleteHotspot:o,tracker:a,stageRef:d,isZoomActive:u,dragCircleRef:m},t)})]})}),Y=n(44765),X=n(23238),$=n(94292),Q=n(29150),ee=n(27697);function et(){return(et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var en=function(e){return x.createElement("svg",et({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"},e),o||(o=x.createElement("path",{fillRule:"evenodd",d:"M9.207 1.293a1 1 0 0 0-1.414 1.414L8.086 3 3.028 8.057c-.372.373-.694.695-.937.981-.257.303-.485.631-.616 1.035a3 3 0 0 0 0 1.854c.131.404.359.732.616 1.035.243.286.565.608.937.98l3.53 3.53c.372.372.694.694.98.937.303.257.631.485 1.035.616a3 3 0 0 0 1.854 0c.404-.131.732-.36 1.035-.616.286-.243.608-.565.98-.937l4.656-4.656a9.18 9.18 0 0 0 .488-.511c.148-.175.308-.397.402-.687.13-.402.13-.834 0-1.236a2.021 2.021 0 0 0-.402-.686 9.19 9.19 0 0 0-.488-.512l-7.89-7.891zM9.5 4.414l-5.03 5.03c-.223.223-.403.403-.55.556h11.166L9.5 4.414z",clipRule:"evenodd"})),i||(i=x.createElement("path",{d:"M20.5 12a1 1 0 0 1 .694.28 9.079 9.079 0 0 1 .34.34c.2.208.468.5.74.833.27.329.558.719.785 1.122.211.375.441.886.441 1.425a3 3 0 0 1-6 0c0-.54.23-1.05.441-1.425.227-.403.516-.793.785-1.122a14.08 14.08 0 0 1 1.08-1.173.995.995 0 0 1 .694-.28zm-18 9a1 1 0 1 0 0 2h12a1 1 0 1 0 0-2h-12z"})))},er=n(96589),eo=n(75475),ei=n(6364),el=n(30803),ea=n(47842),es=n(26297);function eu(e){var t,n=e.display,r=void 0===n||n,o=e.fadeIn,i=void 0!==o&&o,l=e.fadeOut,a=void 0!==l&&l,c=e.duration,d=void 0===c?500:c,v=e.className,h=e.children,g=(0,es.Z)(e,["display","fadeIn","fadeOut","duration","className","children"]),m=(0,x.useState)(!r),y=m[0],b=m[1],w=(0,x.useState)(!i),C=w[0],j=w[1];return(0,x.useEffect)(function(){if(j(r),a&&!r){var e=setTimeout(function(){b(!0)},d);return function(){return clearTimeout(e)}}b(!r)},[r,a,d]),(0,p.jsx)("div",(0,u.Z)((0,s.Z)({className:(0,f.cn)((t={},(0,ea.Z)(t,"transition-opacity duration-".concat(d),i||a),(0,ea.Z)(t,"hidden",y),t),C?"opacity-100":"opacity-0",v)},g),{children:h}))}var ec=n(50930),ed=n(96220),ep=n(81398),ef=n(63072),ev=m()(function(){return Promise.all([n.e(7720),n.e(2239)]).then(n.bind(n,12239))},{loadableGenerated:{webpack:function(){return[12239]}}}),eh=m()(function(){return n.e(3344).then(n.bind(n,29050))},{loadableGenerated:{webpack:function(){return[29050]}}});function eg(e){var t=e.step,n=e.inEditMode,r=e.isSmallScreenOrTile,o=e.tracker,i=e.onEditPath,l=e.updateStep,a=e.onButtonClick,c=e.onOverlayUrlClick,d=(0,eo.Z)(),h=(0,j.u)().fontFamily,g=t.theme,m=t.paths,x=function(e){return null==m?void 0:m.map(function(t){return t.id===e.id?e:t})},y=g===v.OverlayTheme.Dark;return(0,p.jsxs)("div",{className:"flex flex-col gap-2",children:[null==m?void 0:m.map(function(e){var t=e.buttonColor||d.hotspotDefaults.backgroundColor||L.defaultUserPrefs.bgColor,o=e.buttonTextColor||d.hotspotDefaults.textColor||(0,b.pK)(t);return n?(0,p.jsx)(eh,{placement:"top",offset:[0,-4],appendTo:function(){return document.body},tippyClassName:"overflow-visible rounded-xl",wrapperClassName:"flex",render:function(){return(0,p.jsxs)("div",{className:"flex relative items-center justify-start p-1 gap-1",children:[(0,p.jsx)(el.Z,{label:"",colors:[{value:null!=t?t:"",label:"Button color",onChange:function(t){var n=x((0,u.Z)((0,s.Z)({},e),{buttonColor:t}));n&&(i(n),null==l||l({paths:n}))}},{value:null!=o?o:"",label:"Text color",onChange:function(t){var n=x((0,u.Z)((0,s.Z)({},e),{buttonTextColor:t}));n&&(i(n),null==l||l({paths:n}))}},],containerClassName:"relative cursor-pointer",pickerClassName:"absolute top-[38px] left-1/2 -translate-x-1/2",renderLabel:function(e){var n=e.labelRef,r=e.onClick;return(0,p.jsxs)("div",{ref:n,onClick:r,className:"flex items-center justify-center h-9 p-2 rounded-lg gap-1 bg-white hover:bg-gray-100 transition-colors",children:[(0,p.jsx)("div",{className:"w-[16px] h-[16px] rounded-full border border-gray-900/[.12]",style:{backgroundColor:t}}),(0,p.jsx)("div",{className:"w-[16px] h-[16px] rounded-full border border-gray-900/[.12]",style:{backgroundColor:o}})]})}}),(0,p.jsx)("div",{className:"w-px h-9 bg-gray-200"}),(0,p.jsx)(ev,{onDestinationSelect:function(t){var n=t.destinationType,r=t.targetStep,o=t.url;e.targetStepId;var a=(0,es.Z)(e,["targetStepId"]),u="url"===n?x((0,s.Z)({},a,o?{url:o,pathType:"url"}:{pathType:"step",url:""})):x((0,s.Z)({},a,r?{targetStepId:r.id,pathType:"step"}:{pathType:"step"}));u&&(i(u),null==l||l({paths:u}))},path:e,allowUrls:!0}),(null==m?void 0:m.length)>1&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"w-px h-9 bg-gray-200"}),(0,p.jsx)(ef.zx,{onClick:function(){var t=m.filter(function(t){return t.id!==e.id});i(t),null==l||l({paths:t})},buttonType:ef.qh.ghost,buttonSize:ef.Ph.md,iconOnly:(0,p.jsx)(ep.Z,{})})]})]})},children:function(n){var a=n.toggle;return(0,p.jsxs)("a",{className:"flex group/chapterBtn relative",children:[(0,p.jsx)("div",{className:(0,f.cn)("border rounded-xl absolute -inset-1 opacity-0 group-hover/chapterBtn:opacity-100 bg-transparent transition-all",{"border-gray-900":!y,"border-white":y})}),(0,p.jsx)("button",{className:(0,f.cn)("font-semibold relative rounded-lg transition-all opacity-100","bg-transparent text-gray-900 hover:bg-gray-100 active:bg-gray-200",r?"min-h-8 text-sm px-3 py-1":"min-h-12 text-base px-4 py-2","px-8 cursor-pointer"),style:{backgroundColor:t,color:o},onClick:function(e){e.stopPropagation(),a()},tabIndex:-1,children:(0,p.jsx)(er.Z,{className:(0,f.cn)("text-base font-semibold outline-none bg-transparent border-0 border-transparent ring-0 p-0 resize-none select-all focus:ring-0 text-center max-w-60 flex",{"placeholder-[rgba(255,255,255,.5)]":t&&o.toLowerCase().startsWith("#fff"),"placeholder-[rgba(0,0,0,.5)]":t&&o.startsWith("#000")}),style:{fontFamily:h},placeholder:"Button",value:e.buttonText,onFocus:function(e){e.target.select()},onKeyDown:function(e){"Enter"===e.code&&(e.preventDefault(),e.stopPropagation())},onChange:function(t){t.stopPropagation(),t.preventDefault();var n=t.target.value,r=x((0,u.Z)((0,s.Z)({},e),{buttonText:n}));r&&i(r)},onBlur:function(){return null==l?void 0:l({paths:m})}})})]})}},e.id):(0,p.jsx)("a",{className:"flex",href:"url"===e.pathType?e.url:void 0,target:"_blank",rel:"noreferrer",children:(0,p.jsxs)("button",{className:(0,f.cn)("font-semibold relative rounded-lg transition-all opacity-100","bg-transparent text-gray-900 hover:bg-gray-100 active:bg-gray-200","hover:opacity-80 active:opacity-90 flex w-full items-center justify-center",r?"min-h-8 text-sm px-3 py-1":"min-h-12 text-base px-4 py-2"),style:{backgroundColor:t,color:o},onClick:function(t){t.stopPropagation(),"step"===e.pathType&&a?a(e):"url"===e.pathType&&c(e)},children:[e.buttonText,1===m.length&&(0,p.jsx)("div",{className:"absolute inset-0 animate-pingSmall rounded-xl -z-10 border",style:{borderColor:t},children:(0,p.jsx)("div",{className:"absolute inset-0 rounded-xl opacity-[.12]",style:{boxShadow:"0 0 0 4px ".concat(t)}})})]})},e.id)}),n&&4>((null==m?void 0:m.length)||0)&&(0,p.jsx)("button",{className:(0,f.cn)("font-semibold relative rounded-lg transition-all opacity-100","bg-transparent text-sm px-8",y?"bg-white/0 text-white/60 border border-white/60 border-dashed hover:border-white/90 hover:bg-white/10 hover:text-white":"bg-gray-900/0 text-gray-900/60 border border-gray-900/30 border-dashed hover:border-gray-900/60 hover:bg-gray-900/[.04] hover:text-gray-900",r?"min-h-8 text-sm px-3 py-1":"min-h-12 text-base px-4 py-2"),onClick:function(e){e.stopPropagation();var n,r,a=(null==m?void 0:m.length)?m[m.length-1]:void 0,s=d.hotspotDefaults.backgroundColor,u=d.hotspotDefaults.textColor,c=(0,ec.Z)(m||[]).concat([{id:(0,ei.Z)(),buttonColor:a&&null!==(n=a.buttonColor)&&void 0!==n?n:s,buttonTextColor:a&&null!==(r=a.buttonTextColor)&&void 0!==r?r:u,pathType:"step",buttonText:""},]);i(c),null==l||l({paths:c}),o&&o.report("Overlay Button Added",{stepId:t.id})},children:(0,p.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,p.jsx)(ed.Z,{className:"w-[18px] h-[18px]"}),(0,p.jsx)("div",{children:"Add button"})]})})]})}var em=n(26868),ex=n(71869);function ey(e){var t=e.step,n=e.className,r=e.style,o=e.isLastStep,i=e.inEditMode,l=e.isActive,a=e.isSmallScreenOrTile,d=e.overlayControlsRef,h=e.tracker,g=e.exportMode,m=e.updateStep,C=e.onButtonClick,k=e.onOverlayUrlClick,S=(0,eo.Z)(),Z=(0,j.u)().fontFamily,T=(0,x.useState)(t),N=T[0],E=T[1];(0,x.useEffect)(function(){E(t)},[t]);var O=N.title,R=N.subtitle,M=N.buttonText,z=N.buttonColor,A=N.buttonTextColor,H=N.buttonType,F=N.actionUrl,P=N.theme,B=N.paths,D=N.blur,U=void 0===D?v.OverlayBlur.Medium:D,W=(0,c.Z)((0,Q.G)(!1,300),2),V=W[0],_=W[1],q=(0,x.useCallback)(function(e){E(function(t){return(0,s.Z)({},t,e)})},[]);(0,x.useEffect)(function(){i&&!o&&"url"===H&&(q({buttonType:"next_step"}),null==m||m({buttonType:"next_step"}))},[H,o,q,m,i]);var J=(0,x.useCallback)(function(e){E(function(t){return(0,u.Z)((0,s.Z)({},t),{paths:e})})},[]);(0,x.useEffect)(function(){if(S.flows.mayUseChooseYourOwnAdventure&&i&&H&&!(null==B?void 0:B.length)){var e=[(0,s.Z)({id:(0,ei.Z)(),pathType:"next_step"===H?"step":"url"},F?{url:F}:{},M?{buttonText:M}:{},z?{buttonColor:z}:{},A?{buttonTextColor:A}:{}),];E(function(t){return(0,u.Z)((0,s.Z)({},t),{paths:e})}),null==m||m({paths:e})}},[S.flows.mayUseChooseYourOwnAdventure,H,F,i,null==B?void 0:B.length,M,z,A,m,]);var K=(0,y.sJ)(w.H.mobileInfo).isScreenSizeSmall,G=P===v.OverlayTheme.Dark,Y=z||S.hotspotDefaults.backgroundColor||L.defaultUserPrefs.bgColor,X=A||S.hotspotDefaults.textColor||(0,b.pK)(Y),ee=i&&S.flows.mayUseChooseYourOwnAdventure||(null==B?void 0:B.length)?(0,p.jsx)(eg,{step:N,inEditMode:i,isSmallScreenOrTile:a,tracker:h,onEditPath:J,updateStep:m,onButtonClick:C,onOverlayUrlClick:k}):void 0,et=i&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(el.Z,{label:"",colors:[{value:null!=Y?Y:"",label:"Button color",onChange:function(e){q({buttonColor:e,buttonTextColor:""}),null==m||m({buttonColor:e,buttonTextColor:""})}},{value:null!=X?X:"",label:"Text color",onChange:function(e){q({buttonTextColor:e}),null==m||m({buttonTextColor:e})}},],containerClassName:"",pickerClassName:"absolute top-[30px] left-[50%] translate-x-[-50%]",renderLabel:function(e){var t=e.labelRef,n=e.onClick;return(0,p.jsx)("div",{className:"absolute left-4 top-4",ref:t,onClick:n,children:(0,p.jsx)(en,{className:"h-[18px] w-[18px]"})})}}),(0,p.jsx)(er.Z,{className:(0,f.cn)("text-base font-semibold outline-none bg-transparent border-0 border-transparent ring-0 p-0 resize-none select-all focus:ring-0 text-center max-w-[150px]",{"placeholder-[rgba(255,255,255,.3)]":Y&&X.toLowerCase().startsWith("#fff"),"placeholder-[rgba(0,0,0,.3)]":Y&&X.startsWith("#000")}),style:{fontFamily:Z},placeholder:"Button",value:M,onFocus:function(e){e.target.select()},onKeyDown:function(e){"Enter"===e.code&&(e.preventDefault(),e.stopPropagation())},onChange:function(e){e.stopPropagation(),e.preventDefault(),q({buttonText:e.target.value})},onBlur:function(){return null==m?void 0:m({buttonText:M})}})]});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(eu,{className:"absolute inset-0",style:r,display:l,fadeOut:!i,children:(0,p.jsx)($.Overlay,{chooseYourOwnAdventureOverride:ee,isDark:G,blur:U,isScreenSizeSmall:K,inEditMode:i,exportMode:g,className:n,title:O,isSmallScreenOrTile:a,fontFamily:Z,onEdit:q,subtitle:R,buttonType:H,actionUrl:F,buttonBg:Y,textColor:X,onButtonClick:C,onOverlayUrlClick:k,updateStep:m,buttonText:M,buttonContentOverride:et})}),d&&(0,p.jsx)(em.Z,{targetRef:d,children:i&&m&&t.type===v.StepType.Overlay&&l&&(0,p.jsxs)("div",(0,u.Z)((0,s.Z)({className:"hidden sm:flex w-full justify-center flex-col md:flex-row items-center gap-3 lg:gap-6 p-0.5 shrink-0 rounded-lg bg-gray-50"},(0,I.i8)(I.KN.OverlayControls)),{children:[(0,p.jsxs)("div",{className:"flex justify-start items-center md:items-start lg:items-center flex-col lg:flex-row gap-1.5 lg:gap-3",children:[(0,p.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Theme"}),(0,p.jsx)(eb,{configs:[{id:v.OverlayTheme.Dark,label:"Dark"},{id:v.OverlayTheme.Light,label:"Light"},],selectedConfigId:P,onSelect:function(e){q({theme:e}),m({theme:e})},isDark:G})]}),(0,p.jsx)("div",{className:"hidden lg:flex w-px h-8 bg-gray-200"}),(0,p.jsxs)("div",{className:"flex justify-start items-center md:items-start lg:items-center flex-col lg:flex-row gap-1.5 lg:gap-3",children:[(0,p.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Blur"}),(0,p.jsx)(eb,{configs:[{id:v.OverlayBlur.None,label:"Off"},{id:v.OverlayBlur.Small,label:"S"},{id:v.OverlayBlur.Medium,label:"M"},],selectedConfigId:U,onSelect:function(e){q({blur:e}),m({blur:e})},isDark:G})]}),!S.flows.mayUseChooseYourOwnAdventure&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"hidden lg:flex w-px h-8 bg-gray-200"}),(0,p.jsxs)("div",{className:"flex justify-start items-center md:items-start lg:items-center flex-col lg:flex-row gap-1.5 lg:gap-3",children:[(0,p.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Destination"}),(0,p.jsx)(eb,{configs:[{id:"next_step",label:o?"First step":"Next step"},{id:"url",label:"URL",disabled:!o||!S.mayUseURLDestinationInOverlay,disabledTooltipText:S.mayUseURLDestinationInOverlay?"URL destinations are only available on an Arcadeâ€™s last step":"URL destinations are only available on paid plans",containsTextInput:!0,textInputValue:F,onTextInputChange:function(e){q({actionUrl:e});var t=e.trim();t.startsWith("https://")||t.startsWith("http://")||(t="https://".concat(t));var n=!!t&&!(0,b.u1)(t);_(n),n?m({actionUrl:""}):m({actionUrl:t})},invalidTextInput:V,invalidTextInputTooltip:"Please enter a valid URL"},],selectedConfigId:H,onSelect:function(e){q({buttonType:e}),m({buttonType:e})},isDark:G})]})]})]}))})]})}function eb(e){var t=e.configs,n=e.selectedConfigId,r=e.onSelect;return n||(n=t[0].id),(0,p.jsx)("div",{className:"flex gap-1 items-center justify-center rounded-[10px] bg-gray-100 p-1 shrink-0",children:t.map(function(e){var t=e.id,o=e.label,i=e.disabled,l=e.disabledTooltipText,a=e.containsTextInput,s=e.textInputValue,u=e.onTextInputChange,c=e.invalidTextInput,d=e.invalidTextInputTooltip,v=t===n;return(0,p.jsx)("div",{className:(0,f.cn)("flex justify-center items-center px-3 h-8 shrink-0 rounded-lg cursor-pointer border transition-all min-w-[32px]",{"bg-white border-gray-200 hover:bg-gray-50":v,"bg-gray-100 border-gray-100 hover:bg-gray-200":!v&&!i,"bg-gray-100 border-gray-100":i}),onClick:function(){return!i&&!v&&r(t)},children:(0,p.jsxs)("div",{className:(0,f.cn)("flex items-center text-xs font-semibold shrink-0 text-gray-900",{"text-gray-500":i}),children:[o,a&&v&&(0,p.jsx)(ex.Z,{placement:"top",interactive:!0,appendTo:function(){return document.body},maxWidth:300,text:d||"",disabled:!c||!d,visible:!0,children:(0,p.jsx)("input",{type:"url",className:(0,f.cn)("text-xs bg-transparent max-w-md border-0 outline-none focus:outline-none focus:ring-0",c?"text-critical-action":"text-gray-900"),value:s,onChange:function(e){null==u||u(e.target.value)},placeholder:"https://example.com",autoFocus:!0})}),i&&l&&(0,p.jsx)(ex.Z,{placement:"top",interactive:!0,appendTo:function(){return document.body},maxWidth:300,text:l,children:(0,p.jsx)("div",{children:(0,p.jsx)(ee.Z,{className:(0,f.cn)("ml-[6px] cursor-pointer transition-colors w-3 h-3 hover:text-gray-700 text-gray-500")})})})]})},t)})})}var ew=n(50776),eC=m()(function(){return n.e(76).then(n.bind(n,80076))},{loadableGenerated:{webpack:function(){return[80076]}}}),ej=m()(function(){return Promise.all([n.e(7720),n.e(839)]).then(n.bind(n,30839))},{loadableGenerated:{webpack:function(){return[30839]}}}),ek=m()(function(){return Promise.all([n.e(5338),n.e(3923),n.e(9050)]).then(n.bind(n,43923))},{loadableGenerated:{webpack:function(){return[43923]}}}),eS=m()(function(){return Promise.all([n.e(2341),n.e(6515)]).then(n.bind(n,86515))},{loadableGenerated:{webpack:function(){return[86515]}}}),eZ=function(e){var t,n,r,o,i,g,m,k,O,R,M,z,A,H,F,P,L,D,U,W,V,_,q,J,K,$,Q,ee=e.flow,et=e.updateStep,en=e.updateHotspot,er=e.deleteHotspot,eo=e.addHotspot,ei=e.updateCTA,el=e.isWatermarkDisplayed,ea=e.inEditMode,es=void 0!==ea&&ea,eu=e.disableCTA,ec=e.disableNavigation,ed=e.disablePlayButton,ep=void 0!==ed&&ed,ef=e.disableTracking,ev=void 0!==ef&&ef,eh=e.tracker,eg=e.onSplitVideo,em=e.videoControlsRef,ex=e.overlayControlsRef,eb=e.stageRef,eZ=e.exportMode,eT=e.children,eN=(0,x.useRef)(!1),eE=(0,x.useRef)(null),eI=(0,j.u)(),eO=eI.hasBackground,eR=eI.hasWrapper,eM=eI.activeStep,ez=eI.setActiveStep,eA=(0,y.sJ)(w.H.isFullscreen),eH=(0,y.sJ)(w.H.hotspotInspectorIsOpen),eF=(0,y.sJ)(w.H.historyStack),eP=(0,y.sJ)(w.H.stageDimensions),eB=(0,y.sJ)(w.H.isVoiceoverPlaying),eL=(0,c.Z)((0,y.FV)(w.H.selectedHotspot),2),eD=eL[0],eU=eL[1],eW=(0,y.Zl)(w.H.firstStepContentIsReady),eV=(0,Z.ZP)({steps:ee.steps,activeStep:eM}),e_=eV.renderedSteps,eq=eV.renderedInteractiveSteps,eJ=eV.onPreloadStep,eK=eV.onLoadStep,eG=(0,x.useCallback)(function(e){eK(e),eW(!0)},[eW,eK]),eY=(0,x.useState)(!1),eX=eY[0],e$=eY[1],eQ=(0,x.useState)(!1),e0=eQ[0],e1=eQ[1],e2=(0,x.useState)(!1),e3=e2[0],e4=e2[1],e5=(0,y.Zl)(w.H.isAnimationActive),e6=(0,x.useCallback)(function(e){es||(e5(!1),eh.report("Video Ended",{stepId:e}))},[e5,eh,es]),e8=null!=eM?eM:ee.steps[0],e9=(L=(P={src:ee.backgroundMusicUrl,enabled:!es,hasArcadeEnded:(0,T.Is)(ee,e8.id),duckingEnabled:e8.type===v.StepType.Video&&!e8.muted||eB}).src,D=P.enabled,U=P.hasArcadeEnded,W=P.duckingEnabled,V=(0,x.useRef)(),_=(0,x.useRef)(),J=(q=(0,c.Z)((0,y.FV)(w.H.isMuted),2))[0],K=q[1],(0,x.useEffect)(function(){if(!V.current&&D&&L)return V.current=new Audio(L),V.current.loop=!0,V.current.pause(),K(!0),function(){var e;null===(e=V.current)||void 0===e||e.pause(),V.current=void 0}},[D,K,L]),(0,x.useEffect)(function(){var e=function(){clearTimeout(_.current),_.current=void 0,V.current&&(V.current.pause(),V.current.currentTime=0)};if(D&&V.current){var t=W?.1:.6;if(V.current.volume=t,V.current.onplay=function(){V.current&&(V.current.volume=t),K(!1)},U)return function t(n){if(V.current){var r=V.current;if(r.volume>0){try{r.volume=r.volume-n}catch(o){}return _.current=setTimeout(function(){return t(n)},10),e}e()}}(V.current.volume/1e3)}},[D,U,W,K]),$=(0,b.tq)()&&(0,b.G6)()&&!!W,(0,x.useEffect)(function(){V.current&&(V.current.muted=J||$)},[J,$]),{playBackgroundMusic:(0,x.useCallback)(function(){V.current&&D&&V.current.play()},[D])}).playBackgroundMusic,e7=(0,x.useCallback)(function(e){var t,n,r=ee.steps.findIndex(function(t){return t.id===e.id});return null!==(n=null!==(t=(0,Z._d)(ee.steps,r))&&void 0!==t?t:(0,E.kB)(ee.steps))&&void 0!==n?n:ee.steps[0]},[ee.steps]),te=(0,x.useCallback)(function(e){var t,n,r,o,i,l,a;return e.type!==v.StepType.Image&&(e.type!==v.StepType.Overlay||e.paths&&(null===(t=e.paths)||void 0===t?void 0:t.length))?e.type===v.StepType.Overlay&&(null===(n=e.paths)||void 0===n?void 0:n.length)&&(r=null===(a=e.paths.find(function(e){return"step"===e.pathType}))||void 0===a?void 0:a.targetStepId):r=null===(i=e.hotspots)||void 0===i?void 0:null===(l=i[0])||void 0===l?void 0:l.targetId,r&&(o=ee.steps.find(function(e){return e.id===r})),o||(o=e7(e)),o},[ee.steps,e7]),tt=(0,x.useMemo)(function(){return e7(e8)},[e8,e7]),tn=(0,x.useMemo)(function(){return te(e8)},[e8,te]),tr=(0,x.useCallback)((0,l.Z)(function(){var e,t,n,r,o,i,l,a,s,u,c,p,f,g,m=arguments;return(0,d.__generator)(this,function(d){switch(d.label){case 0:if(t=(e=m.length>0&&void 0!==m[0]?m[0]:{}).hotspot,n=e.path,es)return[2];if((null==t?void 0:t.label)?e5(!1):e5(!0),t||n?(e9(),r=null!=(i=(o=(null==t?void 0:t.targetId)||(null==n?void 0:n.targetStepId))?ee.steps.find(function(e){return e.id===o}):void 0)?i:tt):r=tn,e8.type!==v.StepType.Image&&r.type===v.StepType.Image&&e5(!1),r.type!==v.StepType.Video||!(l=document.getElementById(r.id)))return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,l.play()];case 2:return d.sent(),[3,4];case 3:return a=d.sent(),(0,h.Tb)(a),[3,4];case 4:return ez(r.id),(r.type===v.StepType.Image||r.type===v.StepType.Overlay)&&eF.add(r.id),!es&&ee.status===v.PublishStatus.published&&e8&&(t?eh.report("Hotspot Clicked",{stepId:null!==(s=e8.id)&&void 0!==s?s:"",hotspotId:t.id,hotspotLabel:t.label,targetStepId:r?t.targetId:"Unassigned"}):eh.report("Overlay Clicked",{stepId:null!==(u=e8.id)&&void 0!==u?u:"",title:null!==(c=e8.title)&&void 0!==c?c:"",subtitle:null!==(p=e8.subtitle)&&void 0!==p?p:"",buttonLabel:n?null!==(f=n.buttonText)&&void 0!==f?f:"":null!==(g=e8.buttonText)&&void 0!==g?g:"",linkType:"button",linkUrl:"",isCta:!1})),[2]}})}),[es,e8,ez,eF,ee.status,ee.steps,e9,tt,tn,e5,eh,]),to=(0,x.useCallback)((Q=(0,l.Z)(function(e){var t,n,r,o,i,l,a,s,u;return(0,d.__generator)(this,function(c){return es||(n=(null==e8?void 0:e8.id)===(null===(t=ee.steps[ee.steps.length-1])||void 0===t?void 0:t.id),ee.status===v.PublishStatus.published&&e8&&eh.report("Overlay Clicked",{stepId:null!==(r=e8.id)&&void 0!==r?r:"",title:null!==(o=e8.title)&&void 0!==o?o:"",subtitle:null!==(i=e8.subtitle)&&void 0!==i?i:"",buttonLabel:e?null!==(l=e.buttonText)&&void 0!==l?l:"":null!==(a=e8.buttonText)&&void 0!==a?a:"",linkType:"link",linkUrl:e?null!==(s=e.url)&&void 0!==s?s:"":null!==(u=e8.actionUrl)&&void 0!==u?u:"",isCta:!e||n})),[2]})}),function(e){return Q.apply(this,arguments)}),[e8,ee.status,ee.steps,es,eh]);(0,x.useEffect)(function(){if(!eM){var e=es?ee.steps[0]:(0,E.kB)(ee.steps);e&&(ez(e.id),(null==eF?void 0:eF.add)&&e&&eF.add(e.id))}},[ee.id,eF]);var ti=(0,x.useCallback)(function(e){return 0===ee.steps.findIndex(function(t){return t.id===e})},[ee.steps]);(0,x.useEffect)(function(){if(es&&!eX&&!eD&&ee.created.toISOString()===ee.modified.toISOString()&&ti(e8.id)){var e,t=null===(e=e8.hotspots)||void 0===e?void 0:e[0];t&&(e$(!0),eU(t))}},[eD,e8.hotspots,e8.id,ee.created,ee.modified,es,ti,eU,eX,]),(0,x.useEffect)(function(){eN.current||ti(e8.id)||(eN.current=!0)},[e8.id,ti]);var tl,ta,ts,tu,tc,td,tp,tf,tv,th,tg,tm,tx,ty,tb,tw,tC,tj,tk,tS,tZ,tT,tN,tE,tI,tO,tR,tM,tz,tA,tH,tF=(0,y.sJ)(w.H.mobileInfo),tP=tF.isScreenSizeSmall,tB=tF.isMobile,tL=(0,x.useMemo)(function(){return(0,N.q)(ee)},[ee]).buttonBgColor,tD=(0,x.useMemo)(function(){return(0,Z.sc)(ee.steps)},[ee.steps]),tU=(ta=(0,j.u)().activeStep,tu=(ts=(0,c.Z)((0,y.FV)(w.H.navInfo),2))[0],tc=ts[1],(0,x.useEffect)(function(){var e=null!=ta?ta:tD[0];tc({stepCount:tD.length,stepIndex:tD.findIndex(function(t){return t.id===e.id})})},[ta,tc,tD]),tu),tW=(tp=(td={enabled:!es&&ee.autoplay&&!eZ,activeStep:eM,onNextStep:tr}).enabled,tf=td.activeStep,tv=td.onNextStep,tg=(th=(0,c.Z)((0,y.FV)(w.H.isAutoplayActive),2))[0],tm=th[1],tx=(0,y.sJ)(w.H.isArcadeFrameVisible),tb=(ty=(0,x.useState)(null))[0],tw=ty[1],tC=(0,x.useCallback)(function(){tb&&clearTimeout(tb),tw(null),tm(!1)},[tm,tb]),(0,x.useEffect)(function(){tp&&tg||tC()},[tp,tC,tg]),(0,x.useEffect)(function(){tp&&tm(!0)},[tp,tm]),(0,x.useEffect)(function(){tf&&tx&&tf.type!==v.StepType.Video&&tw(setTimeout(function(){tv()},function(e){if(e.type===v.StepType.Image)return C(e.hotspots.reduce(function(e,t){return t.defaultOpen?e+t.label.length:e},0));if(e.type===v.StepType.Overlay){var t,n=e.buttonText;return(null===(t=e.paths)||void 0===t?void 0:t.length)&&(n=e.paths.reduce(function(e,t){return[e,t.buttonText].join("")},"")),C([e.title,e.subtitle,n].join("").length)}}(tf)))},[tf,tv,tm,tx]),(0,x.useEffect)(function(){return function(){tb&&clearTimeout(tb)}},[tb]),{turnOffAutoplay:(0,x.useCallback)(function(){tm(!1)},[tm])}).turnOffAutoplay,tV=(0,x.useCallback)(function(e){var t;tW(),e9(),eh.report("Progress Bar Nav Clicked",{fromStepId:e8.id,toStepId:e.id}),e.type===v.StepType.Image&&e8.type===v.StepType.Image&&(null===(t=null==e8?void 0:e8.hotspots[0])||void 0===t?void 0:t.style)!=="callout"?e5(!0):e5(!1),ez(e.id)},[null==e8?void 0:e8.hotspots,e8.id,e8.type,e9,ez,e5,tW,eh,]),t_=(0,x.useCallback)(function(){var e=tU.stepIndex;if(e!==tU.stepCount-1){var t=(e+1)%tD.length;tV(tD[t]),eh.report("Navigated With Arrow Right Key",{fromStepId:e8.id,toStepId:tD[t].id})}},[e8.id,tU.stepCount,tU.stepIndex,tD,tV,eh,]),tq=(0,x.useCallback)(function(){var e=tU.stepIndex;if(0!==e){var t=e-1<0?tD.length-1:e-1;tV(tD[t]),eh.report("Navigated With Arrow Left Key",{fromStepId:e8.id,toStepId:tD[t].id})}},[e8.id,tU.stepIndex,tD,tV,eh,]),tJ=(0,x.useMemo)(function(){var e;return((null==eM?void 0:eM.type)===v.StepType.Image||(null==eM?void 0:eM.type)===v.StepType.Video)&&!!(null==eM?void 0:null===(e=eM.panAndZoom)||void 0===e?void 0:e.enabled)},[null==eM?void 0:null===(t=eM.panAndZoom)||void 0===t?void 0:t.enabled,null==eM?void 0:eM.type]),tK=(tS=void 0===(tk=(tj={position:{x:null!==(A=null==eM?void 0:null===(n=eM.hotspots)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r.x)&&void 0!==A?A:0,y:null!==(H=null==eM?void 0:null===(o=eM.hotspots)||void 0===o?void 0:null===(i=o[0])||void 0===i?void 0:i.y)&&void 0!==H?H:0,left:null==eM?void 0:null===(g=eM.panAndZoom)||void 0===g?void 0:null===(m=g.position)||void 0===m?void 0:m.left,top:null==eM?void 0:null===(k=eM.panAndZoom)||void 0===k?void 0:null===(O=k.position)||void 0===O?void 0:O.top},containerDimensions:{width:eP.width,height:eP.height},zoomLevel:null!==(F=null==eM?void 0:null===(R=eM.panAndZoom)||void 0===R?void 0:R.zoomLevel)&&void 0!==F?F:1.5,triggerOnChange:eM,shouldZoom:tJ&&(!es||e0)}).zoomLevel)?1.5:tk,tZ=tj.position,tT=tj.triggerOnChange,tN=tj.shouldZoom,tE=tj.containerDimensions,tO=(tI=(0,c.Z)((0,y.FV)(w.H.zoomBox),2))[0],tR=tI[1],(0,x.useEffect)(function(){return tR(function(e){return(0,u.Z)((0,s.Z)({},e),{zoomLevel:tS})})},[tR,tS]),tM=(0,x.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;tR({top:0,left:0,height:tE.height,width:tE.width,zoomLevel:e})},[tE.height,tE.width,tR]),tz=(0,x.useCallback)(function(){var e=tE.width,t=tE.height,n=e/tS,r=t/tS;if(!S()(tZ.top)&&!S()(tZ.left)){var o=tZ.x,i=tZ.y,l=o<=1?o*e:o,a=i<=1?i*t:i,s=(l-n/2)*tS,u=(a-r/2)*tS;s=(s=s/tS+n>e?s-l/2+(n*tS-l):s)<0?0:s,tR({top:-(u=(u=u/tS+r>t?u-a/2+(r*tS-a):u)<0?0:u),left:-s,height:r,width:n,zoomLevel:tS})}S()(tZ.top)&&S()(tZ.left)&&tR({top:tZ.top*t,left:tZ.left*e,height:r,width:n,zoomLevel:tS})},[tE.height,tE.width,tZ.left,tZ.top,tZ.x,tZ.y,tR,tS,]),(0,x.useEffect)(function(){return tz()},[tT,tN,tz,tM]),tA=(0,x.useMemo)(function(){return{transitionProperty:"transform",transitionTimingFunction:"cubic-bezier(0.4, 0, .2, 1)",transitionDuration:"600ms",transform:tN?"translate3d(".concat(tO.left,"px, ").concat(tO.top,"px, 0) scale(").concat(tO.zoomLevel,")"):"translate3d(0px, 0px, 0) scale(1)",transformOrigin:"0 0",willChange:"transform"}},[tO.left,tO.top,tO.zoomLevel,tN]),tH=(0,x.useMemo)(function(){return!!(tO.zoomLevel>1&&tN)},[tN,tO.zoomLevel]),{zoomIn:tz,zoomOut:tM,setZoomBox:tR,zoomStyles:tA,zoomLevel:tS,zoomBox:tO,isZoomActive:tH}),tG=tK.zoomIn,tY=tK.zoomOut,tX=tK.zoomBox,t$=tK.zoomStyles,tQ=tK.isZoomActive,t0=(0,x.useCallback)(function(e){var t,n=e.clientX,r=e.clientY,o=null==document?void 0:null===(t=document.elementsFromPoint)||void 0===t?void 0:t.call(document,n,r);if((null==o?void 0:o.length)&&o.slice(0,10).find(function(e){return(0,a.Z)(e,HTMLElement)&&"mouseoverOverrideEnabledOnPanandzoom"in e.dataset})){e4(!0);return}!eH&&e4(!1)},[eH]),t1=(0,x.useCallback)(function(e){tW(),tr({hotspot:e})},[tr,tW]);return(0,Y.x6)("ArrowRight",{},t_,!0,es),(0,Y.x6)("ArrowLeft",{},tq,!0,es),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{ref:eb,className:(0,f.cn)("relative group flex w-full h-full",{"cursor-zoom-out":tQ&&tJ&&!es,"cursor-zoom-in":!tQ&&tJ&&!es,"overflow-hidden":!eH,"border border-[rgba(0,0,0,0.1)] rounded-lg":!tP&&!tB&&!eR&&!eZ,"rounded-b-lg":!tP&&!tB&&!eZ}),onClick:function(e){tW(),e.stopPropagation(),tQ&&tJ&&!es?tY():tG(),e9()},onMouseMove:function(e){var t;return es&&(null==eM?void 0:null===(t=eM.panAndZoom)||void 0===t?void 0:t.enabled)&&!e0&&t0(e)},children:[(0,p.jsxs)(ew.Z,{className:(0,f.cn)("absolute select-none z-0 flex w-full h-full",{"overflow-hidden":!tP&&!tB&&!eR,"overflow-hidden rounded-b-lg":es&&eR}),style:(0,s.Z)({},t$,eA?{}:{height:eP.height}),transitionType:"transform",waitUntilAllGlobalTransitionsEnd:!0,onTransitionStart:function(){return e5(!0)},onTransitionEnd:function(){return e5(!1)},children:[(0,p.jsx)("div",{className:(0,f.cn)("relative flex w-full h-full",{"overflow-hidden":!eR&&(eO&&!tP||es)}),style:{zIndex:es?"":"-1"},children:e_.map(function(e){var t=e.id===e8.id,n=e8.type===v.StepType.Overlay&&tn.id===e.id||t;return e.type===v.StepType.Image?(0,p.jsx)(X.Z,{src:e.url,alt:e.name,layout:"fill",onLoadingComplete:function(){eG(e.id)},className:(0,f.cn)("absolute top-0 w-full object-cover h-full flex",{"opacity-100 transition-none":n&&eN.current,"opacity-100 transition-opacity duration-1000":n&&!eN.current,"opacity-0 z-[-99999999]":!n}),blurhash:e.blurhash,priority:n,sizes:"(min-width: 1em) 100vw, 100vw"},"image-".concat(e.id)):e.type===v.StepType.Video?(0,p.jsx)(ek,{step:e,disablePlayButton:ep,disableTracking:ev,inEditMode:es,isActive:t,isVisible:n,className:"w-full h-full flex",tracker:eh,onReady:eG,onEnded:e6,onSplitVideo:eg,getNextStep:te,videoControlsRef:em,exportMode:eZ},"video-".concat(e.id,"-").concat(e.url,"-").concat(e.streamUrl)):void 0})}),eT]}),eq.map(function(e){var t,n=e.id===(null==eM?void 0:eM.id);if(e.type===v.StepType.Overlay)return(0,p.jsx)(ey,{className:(0,f.cn)({"rounded-lg overflow-hidden flex w-full h-full":!tP&&!tB&&!eR}),style:(0,s.Z)({},(0,I.m)(I.KN.Overlay)),step:e,isLastStep:e.id===(null===(t=ee.steps[ee.steps.length-1])||void 0===t?void 0:t.id),inEditMode:es,isActive:n,isSmallScreenOrTile:tP&&!es,exportMode:eZ,updateStep:et,tracker:eh,onButtonClick:function(e){tW(),tr({path:e})},onOverlayUrlClick:function(e){tW(),to(e)},overlayControlsRef:ex},"overlay-".concat(e.id))}),tJ&&es&&(0,p.jsx)(eS,(0,u.Z)((0,s.Z)({},tX),{updateStep:et,previewOn:e0,zoomEditorRef:eE,mouseIsOnTopOfHotspot:e3,showPreview:function(){e1(!0),setTimeout(function(){return e1(!1)},2500)}})),e8.type===v.StepType.Image&&(0,p.jsx)(G,{hotspots:e8.hotspots,inEditMode:es,onHotspotClick:t1,updateHotspot:en,deleteHotspot:er,addHotspot:eo,tracker:eh,isZoomActive:es?e0:tQ,zoomStyles:t$,stageRef:eb}),(null===(M=e8.cta)||void 0===M?void 0:M.id)&&!(void 0!==eu&&eu)&&(0,p.jsx)(eC,{stepId:e8.id,tracker:eh,cta:e8.cta,inEditMode:es,onReplay:function(){ez(ee.steps[0].id)},updateCTA:ei}),!es&&ee.showFlowNavIndicator&&!tP&&!(void 0===ec||ec)&&(0,p.jsx)(ej,{steps:tD,onPreloadStep:eJ,indicatorColor:tL,navToStep:tV,isWatermarkDisplayed:void 0===el||el})]}),tP&&!es&&(0,p.jsx)(B,{hotspot:(null==eM?void 0:eM.type)===v.StepType.Overlay?{label:"",bgColor:eM.buttonColor,textColor:eM.buttonColor?(0,b.pK)(eM.buttonColor):void 0}:null==eM?void 0:null===(z=eM.hotspots)||void 0===z?void 0:z[0],navToNextStep:function(){tW(),t_()},replay:function(){return tV(tD[0])}})]})}},10266:function(e,t,n){n.d(t,{Z:function(){return I}});var r,o=n(70865),i=n(96670),l=n(26297),a=n(66383),s=n(52322),u=n(60845),c=n(269),d=n(2784);function p(){return(p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=function(e){return d.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},e),r||(r=d.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.167 5.833 12.25 1.75m0 0h-3.5m3.5 0v3.5M5.833 8.167 1.75 12.25m0 0h3.5m-3.5 0v-3.5",vectorEffect:"non-scaling-stroke"})))},v=n(34347),h=n(29578),g=n(53476),m=n(64989),x=n(42303),y=n(97818),b=n(49748),w=n(48878),C=n(16283),j=n(60058);n(96211);var k=n(52742),S=n(85819),Z=n(91914),T=n(71869),N=(0,d.forwardRef)(function(e,t){var n=e.title,r=e.className,l=e.allowFullscreen,p=e.hasBackgroundImage,y=e.inEditMode,w=void 0!==y&&y,N=e.darkMode,E=e.toggleFullscreen,I=e.onRefresh,O=e.onFlowEdit,R=e.onRender,M=e.children,z=(0,g.sJ)(b.H.stageDimensions),A=(0,g.sJ)(b.H.isFullscreen),H=(0,g.sJ)(b.H.isAutoplayActive),F=(0,g.sJ)(b.H.isOnLastStep),P=(0,a.Z)((0,g.FV)(b.H.isMuted),2),B=P[0],L=P[1],D=(0,d.useState)(!1),U=D[0],W=D[1],V=(0,d.useState)(z.height),_=V[0],q=V[1],J=(0,d.useState)(n),K=J[0],G=J[1],Y=(0,d.useState)(!1),X=Y[0],$=Y[1],Q=(0,d.useRef)(null),ee=(0,d.useRef)(null),et=(0,m.u)().flow,en=(0,x.a)(et,!1,!0).aspectRatio;return(0,d.useEffect)(function(){null==R||R()},[R]),(0,d.useEffect)(function(){return G(n)},[n]),(0,d.useEffect)(function(){var e,t=window.innerHeight,n=null===(e=ee.current)||void 0===e?void 0:e.offsetTop;n&&z.height+n>t&&!w?(W(!0),q(t-n)):(W(!1),q(z.height))},[w,z.height]),(0,d.useEffect)(function(){H||(F?setTimeout(function(){return $(!0)},1e3):$(!1))},[H,F]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("style",{children:"\n\n              @media (max-aspect-ratio: ".concat(1/en,") {\n                .aspect-ratio-box {\n                  width: 100%;\n                  max-height: -webkit-fill-available;\n                }\n\n              }\n\n              @media (min-aspect-ratio: ").concat(1/en,") {\n                .aspect-ratio-box\n                 {\n                  height: ").concat(w?"calc(100% - 142px)":"100%",";\n                  width: auto;\n                }\n\n              }\n              ")}),(0,s.jsxs)("div",{className:(0,u.cn)("relative flex flex-col aspect-ratio-box items-center box-border bg-clip-border",{"mt-10":w,"opacity-0":0===_,"!w-4/5 !h-auto":p&&!w,"shadow-lg m-auto":p&&!U,"shadow-lg mx-auto mt-14":p&&U,iframe:!w&&!A},r),ref:t,style:{aspectRatio:"".concat(1/en)},children:[(0,s.jsxs)("div",{className:(0,u.cn)("flex border border-b-0 rounded-t-lg overflow-hidden shrink-0 w-full h-10 box-border",{"w-full !absolute -top-10":w,"relative w-full":!w,"border-gray-200 bg-gray-100":!N,"border-[rgba(255,255,255,.1)] bg-gray-800":N}),children:[(0,s.jsx)("div",(0,i.Z)((0,o.Z)({className:"flex-[1_1_33%] h-full px-2 sm:px-3 flex items-center gap-[5px] sm:gap-2 relative"},(0,j.i8)(j.KN.BrowserWindow)),{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:(0,u.cn)("flex rounded-full h-3 w-3",{"bg-gray-900/[.32]":!N,"bg-white/[.32]":N})}),(0,s.jsx)("div",{className:(0,u.cn)("flex rounded-full h-3 w-3",{"bg-gray-900/[.24]":!N,"bg-white/[.24]":N})}),(0,s.jsx)("div",{className:(0,u.cn)("flex rounded-full h-3 w-3",{"bg-gray-900/[.16]":!N,"bg-white/[.16]":N})})]})})),(0,s.jsx)("div",{className:"flex-[1_1_33%] max-w-[50%] flex items-center justify-center",children:(0,s.jsxs)("div",{className:(0,u.cn)("flex items-center w-full justify-center relative h-[28px] rounded-lg text-[14px] p-1",{"bg-gray-200 text-gray-600":!N,"bg-gray-700 text-gray-300":N}),children:[(0,s.jsxs)("div",{className:"flex items-center w-full max-w-[80%] justify-center px-4",children:[(0,s.jsx)(k.Zp7,{className:"flex shrink-0 mr-2 text-gray-400"}),(0,s.jsx)("span",{className:(0,u.cn)("truncate relative overflow-hidden focus:outline-none font-[Inter] text-sm"),children:K})]}),!!I&&(0,s.jsx)("div",{className:(0,u.cn)("_replay flex items-center justify-center absolute right-1 cursor-pointer w-[20px] h-[20px] rounded-md transition-all group bg-transparent",{"text-gray-400 hover:bg-gray-300":!N,"text-gray-400 hover:bg-gray-600":N,"bg-gray-300":!N&&F&&!H,"bg-gray-600":N&&F&&!H}),ref:Q,onMouseEnter:function(){return $(!0)},onMouseLeave:function(){return $(!1)},children:(0,s.jsx)(S.Fer,{className:(0,u.cn)("h-[18px] w-[18px] transition-all",{"group-hover:text-gray-600":!N,"group-hover:text-gray-300":N,"!text-gray-600":!N&&F&&!H,"!text-gray-300":N&&F&&!H}),onClick:I})})]})}),(0,s.jsx)("div",(0,i.Z)((0,o.Z)({className:"h-full flex-[1_1_33%] flex items-center justify-end px-2"},(0,j.i8)(j.KN.BrowserWindow)),{children:w?(0,s.jsx)(T.Z,{text:"Toggle light or dark mode",className:(0,u.cn)({"!bg-white !text-gray-900":N}),placement:"left",animation:"shift-away",children:(0,s.jsx)("div",{className:(0,u.cn)("rounded-lg flex w-6 h-6 items-center justify-center transition-colors group bg-transparent cursor-pointer",{"text-gray-400 hover:bg-gray-200":!N,"text-gray-400 hover:bg-gray-700":N}),onClick:function(){return null==O?void 0:O({flowWrapper:N?c.FlowWrapper.browserLight:c.FlowWrapper.browserDark})},children:(0,s.jsx)(Z.KYc,{className:(0,u.cn)("w-[14px] h-[14px] transition-colors",{"group-hover:text-gray-600":!N,"group-hover:text-gray-300":N})})})}):(0,s.jsxs)(s.Fragment,{children:[(0,C.Kt)(et)&&(0,s.jsx)(T.Z,{text:B?"Unmute":"Mute",disabled:w,className:(0,u.cn)("",{"!bg-white !text-gray-900":N}),placement:"right",animation:"shift-away",children:(0,s.jsx)("div",{className:(0,u.cn)("rounded-lg flex mr-1 w-6 h-6 items-center justify-center transition-colors group bg-transparent cursor-pointer",{"text-gray-400 hover:bg-gray-200":!N,"text-gray-400 hover:bg-gray-700":N}),onClick:function(){return L(!B)},children:B?(0,s.jsx)(v.Z,{className:(0,u.cn)("w-4 h-4 transition-colors",{"group-hover:text-gray-600":!N,"group-hover:text-gray-300":N})}):(0,s.jsx)(h.Z,{className:(0,u.cn)("w-4 h-4 transition-colors",{"group-hover:text-gray-600":!N,"group-hover:text-gray-300":N})})})}),(0,s.jsx)(T.Z,{text:"Fullscreen",disabled:w,className:(0,u.cn)("",{"!bg-white !text-gray-900":N}),placement:"right",animation:"shift-away",children:(0,s.jsx)("div",{className:(0,u.cn)("rounded-lg flex w-6 h-6 items-center justify-center transition-colors group bg-transparent",{"cursor-pointer":l,"text-gray-400 hover:bg-gray-200":!N,"text-gray-400 hover:bg-gray-700":N}),onClick:function(e){e.stopPropagation(),e.preventDefault(),l&&(null==E||E())},children:(0,s.jsx)(f,{className:(0,u.cn)("w-[14px] h-[14px] transition-colors",{"group-hover:text-gray-600":!N,"group-hover:text-gray-300":N})})})})]})}))]}),(0,s.jsx)("div",{className:(0,u.cn)("relative w-full h-full border border-t-0 flex rounded-b-lg",{"overflow-y-auto":U&&!w,"!overflow-hidden":!U&&!w,"bg-gray-100 bg-opacity-30 backdrop-blur-sm":p,"border-gray-200":!N,"border-gray-800":N}),style:{height:z.height},children:M})]}),!!I&&(0,s.jsx)(T.Z,{reference:Q,text:"Replay",className:(0,u.cn)("",{"!bg-white !text-gray-900":N}),appendTo:function(){return document.body},placement:"right",visible:X,getReferenceClientRect:function(){var e=document.querySelector("._replay").getBoundingClientRect();return{top:e.top,left:e.left,right:e.right,bottom:e.bottom,width:e.width,height:e.height}},animation:"shift-away"})]})});N.displayName="BrowserWindow";var E=(0,d.forwardRef)(function(e,t){var n,r,p,k,S,Z,T,E,I,O,R,M,z,A=e.flowWrapper,H=e.exportMode,F=e.children,P=e.onRender,B=e.inEditMode,L=e.stageRef,D=(0,l.Z)(e,["flowWrapper","exportMode","children","onRender","inEditMode","stageRef"]),U=(0,g.sJ)(b.H.mobileInfo),W=U.isIOS,V=U.isScreenSizeSmall,_=(0,m.u)(),q=_.flow,J=_.hasBackground,K=(0,x.a)(q,!1,!0).aspectRatio,G=A===c.FlowWrapper.none||V&&!B,Y=(0,a.Z)((0,g.FV)(b.H.isMuted),2),X=Y[0],$=Y[1],Q=(k=(r={stageRef:L,enabled:!B}).stageRef,S=r.enabled,T=(Z=(0,a.Z)((0,g.FV)(b.H.isFullscreen),2))[0],E=Z[1],O=(I=(0,a.Z)((0,g.FV)(b.H.stageDimensions),2))[0],R=I[1],(0,w.y)({disabled:O.width===(null===(p=k.current)||void 0===p?void 0:p.clientWidth)||!S,watchBody:!0,onResize:function(){k.current&&R({width:k.current.clientWidth,height:k.current.clientHeight})}}),M="undefined"!=typeof document&&(!!document.documentElement.requestFullscreen||!!document.documentElement.webkitRequestFullscreen||!!document.documentElement.msRequestFullscreen),z=(0,d.useCallback)(function(){var e=document.documentElement;M&&(T?(document.exitFullscreen&&document.fullscreenElement?document.exitFullscreen().then(function(){return screen.orientation.unlock()}).catch(function(){}):document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),E(!1)):(e.requestFullscreen?e.requestFullscreen().then(function(){O.width>O.height&&(0,y.tq)()&&screen.orientation.lock("landscape")}).catch(function(){}):e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),E(!0)))},[T,M,E,O.height,O.width,]),{isFullscreen:T,toggleFullscreen:z}),ee=Q.isFullscreen,et=Q.toggleFullscreen;return((0,d.useEffect)(function(){G&&(null==P||P())},[P,G]),G)?null!==(n=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("style",{children:"\n          \n            \n              @media (max-aspect-ratio: ".concat(1/K,") {\n                .aspect-ratio-box {\n                  width: 100%;\n                }\n              }\n\n              @media (min-aspect-ratio: ").concat(1/K,") {\n                .aspect-ratio-box {\n                  height: ").concat(B?"calc(100% - 142px)":"100%",";\n                  width: auto;\n                }\n              }\n\n              ")}),(0,s.jsxs)("div",{className:(0,u.cn)("relative aspect-ratio-box flex justify-center box-border bg-clip-border group/stage",{"items-start":V&&!B,"items-center":!V&&J,"!w-4/5 items-center !h-auto":!V&&J&&!B&&!ee,iframe:!B&&!ee,"!h-screen":ee},D.className),ref:t,style:{aspectRatio:"".concat(1/K)},children:[!B&&!H&&(0,s.jsxs)("div",(0,i.Z)((0,o.Z)({className:"absolute top-3 right-3 flex"},(0,j.i8)(j.KN.FullscreenButton)),{children:[(0,C.Kt)(q)&&(0,s.jsx)("div",{className:"flex w-6 h-6 mr-1 items-center justify-center cursor-pointer rounded-lg text-white bg-gray-900/30 backdrop-blur-sm group-hover/stage:bg-gray-900/50 transition-all",onClick:function(){$(!X)},children:X?(0,s.jsx)(v.Z,{className:"w-3.5 h-3.5"}):(0,s.jsx)(h.Z,{className:"w-3.5 h-3.5"})}),(0,s.jsx)("div",{className:(0,u.cn)("flex w-6 h-6 items-center justify-center cursor-pointer rounded-lg text-white bg-gray-900/30 backdrop-blur-sm group-hover/stage:bg-gray-900/50 transition-all",{hidden:W}),onClick:function(){return et()},children:(0,s.jsx)(f,{className:"w-[14px] h-[14px]"})})]})),F]})]}))&&void 0!==n?n:null:(0,s.jsx)(N,(0,i.Z)((0,o.Z)({},D),{onRender:P,ref:t,darkMode:A===c.FlowWrapper.browserDark,inEditMode:B,toggleFullscreen:et,children:F}))});E.displayName="FlowWrapper";var I=E},26868:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(2784),o=n(28316);function i(e){var t=e.targetRef,n=e.children,i=(0,r.useState)(!1),l=i[0],a=i[1];return(0,r.useEffect)(function(){return a(!0)},[]),l&&t.current?(0,o.createPortal)(n,t.current):null}},42303:function(e,t,n){n.d(t,{$:function(){return f},a:function(){return v}});var r=n(98788),o=n(70865),i=n(5163),l=n(52094),a=n(2784),s=n(75475),u=n(97818),c=n(16283),d=n(17717),p=n(76790),f=2/3;function v(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],v=(0,s.Z)(),h=(0,a.useState)(),g=h[0],m=h[1],x=(0,a.useMemo)(function(){if(g)return g;if(e&&e.steps.length>0){var t=(0,c.ot)(e.steps);if((null==t?void 0:t.size)&&t.size.width>0&&t.size.height>0)return t.size;t&&u.jU&&!n&&(0,d.C0)(t).then(m)}},[g,e,n]),y=(0,a.useMemo)(function(){return n&&(null==e?void 0:e.aspectRatio)?e.aspectRatio:!x||x.width<=0||x.height<=0?(null==e?void 0:e.aspectRatio)||f:x.height/x.width},[x,null==e?void 0:e.aspectRatio,n]);(0,l.L)(function(){e&&!n&&v.userId&&Number.isFinite(y)&&y>0&&y!==e.aspectRatio&&y!==f&&e.update({aspectRatio:y},v.userId)},[e,y,v.userId,n]);var b=(0,a.useRef)(null);return(0,a.useEffect)(function(){e&&u.jU&&v.userId&&t&&b.current!==e.id&&e.steps.length>0&&e.steps.some(function(e){return!e.size||e.size.width<=0})&&(b.current=e.id,(0,r.Z)(function(){var t,n,r,l,a,s,u,c,f,h,g;return(0,i.__generator)(this,function(i){switch(i.label){case 0:if(t={},!((n=e.steps.filter(p.WI).filter(function(e){return!e.size||e.size.width<=0})).length>0))return[3,9];r=!0,l=!1,a=void 0,i.label=1;case 1:i.trys.push([1,6,7,8]),s=n[Symbol.iterator](),i.label=2;case 2:if(r=(u=s.next()).done)return[3,5];return c=u.value,[4,(0,d.C0)(c)];case 3:f=i.sent(),t[c.id]=f,i.label=4;case 4:return r=!0,[3,2];case 5:return[3,8];case 6:return h=i.sent(),l=!0,a=h,[3,8];case 7:try{r||null==s.return||s.return()}finally{if(l)throw a}return[7];case 8:g=e.steps.map(function(e){return(0,o.Z)({},e,e.id in t?{size:t[e.id]}:{})}),e.update({steps:g},v.userId),i.label=9;case 9:return[2]}})})())},[e,t,v.userId]),{aspectRatio:y,dimensions:x}}},74876:function(e,t,n){n.d(t,{D:function(){return o}});var r=n(2784);function o(e){var t=(0,r.useRef)();return(0,r.useEffect)(function(){t.current=e},[e]),t.current}},48878:function(e,t,n){n.d(t,{y:function(){return c}});var r=n(98788),o=n(70865),i=n(5163),l=n(1316),a=n(52094),s=n(92642),u=n(2784);function c(e){var t=e.targetRef,c=e.disabled,d=void 0!==c&&c,p=e.fireOnMount,f=void 0!==p&&p,v=e.watchBody,h=void 0!==v&&v,g=e.observerOptions,m=e.onResize,x=e.debounce,y=(0,u.useRef)(null),b=(0,u.useState)({width:void 0,height:void 0}),w=b[0],C=b[1],j=(0,u.useCallback)(function(e){m?m(e):C(e)},[m]),k=(0,l.y)(function(e){m?m(e):C(e)},[m],x||0);return(0,a.L)(function(){if("undefined"!=typeof document&&!d){if(f){var e,o,l=h?document.body:y.current;if(l){var a=l.getBoundingClientRect(),u=a.width,c=a.height;x?k({width:u,height:c}):j({width:u,height:c})}}return(e=(0,r.Z)(function(){var e;return(0,i.__generator)(this,function(r){switch(r.label){case 0:if(r.trys.push([0,3,,4]),window.ResizeObserver)return[3,2];return[4,n.e(5650).then(n.bind(n,35650))];case 1:r.sent().install(),r.label=2;case 2:return o=new window.ResizeObserver(function(e){e.forEach(function(e){var t=e&&e.contentRect||{},n=t.width,r=t.height;x?k({width:n,height:r}):j({width:n,height:r})})}),(null==t?void 0:t.current)?o.observe(null==t?void 0:t.current,g):y.current?o.observe(y.current,g):h&&o.observe(document.body,g),[3,4];case 3:return e=r.sent(),(0,s.Tb)(e),[3,4];case 4:return[2]}})}),function(){return e.apply(this,arguments)})(),function(){null==o||o.disconnect()}}},[g,d,k,j,f,h,x,t,]),(0,o.Z)({ref:y},w)}},78646:function(e,t,n){n.d(t,{ZP:function(){return c},_d:function(){return g},sc:function(){return m}});var r=n(50930),o=n(269),i=n(18149),l=n.n(i),a=n(2784),s=n(76790),u=n(79826);function c(e){var t=e.steps,n=e.activeStep,o=e.depth,i=void 0===o?2:o,l=(0,a.useMemo)(function(){return m(t)},[t]),u=(0,a.useMemo)(function(){return f(t,i)},[t,i]),c=(0,a.useMemo)(function(){return[d(u,n),p(u,n),]},[u,n]),v=c[0],h=c[1],g=(0,a.useState)(new Set),x=g[0],y=g[1],b=(0,a.useCallback)(function(e){(0,s.WI)(e)&&y(function(t){return t.has(e.id)?t:new Set(t).add(e.id)})},[y]),w=(0,a.useState)(new Set),C=w[0],j=w[1],k=(0,a.useCallback)(function(e){j(function(t){return t.has(e)?t:new Set(t).add(e)})},[j]),S=(0,a.useMemo)(function(){return l.find(function(e){return(0,s.WI)(e)&&!C.has(e.id)})},[l,C]);return(0,a.useEffect)(function(){S&&b(S)},[S,b]),{renderedSteps:(0,a.useMemo)(function(){var e=new Map,t=!0,o=!1,i=void 0;try{for(var a,u=v[Symbol.iterator]();!(t=(a=u.next()).done);t=!0){var c=a.value;(0,s.WI)(c)&&!e.has(c.id)&&e.set(c.id,c)}}catch(d){o=!0,i=d}finally{try{t||null==u.return||u.return()}finally{if(o)throw i}}var p=!0,f=!1,h=void 0;try{for(var g,m=(0,r.Z)(C).concat((0,r.Z)(x))[Symbol.iterator]();!(p=(g=m.next()).done);p=!0)!function(){var t=g.value;if(!e.has(t)){var n=l.find(function(e){return e.id===t});n&&e.set(t,n)}}()}catch(y){f=!0,h=y}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}return n&&(0,s.WI)(n)&&e.set(n.id,n),Array.from(e.values())},[n,v,l,x,C]),renderedInteractiveSteps:h,onPreloadStep:b,onLoadStep:k}}var d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return[];var o=e[t.id];return o?n?o.after:(0,r.Z)(o.after).concat((0,r.Z)(o.before)):[]},p=function(e,t){if(!t)return[];var n=e[t.id];return n?[n.before.find(function(e){return e.type===o.StepType.Overlay}),n.step,].filter(function(e){return(null==e?void 0:e.type)===o.StepType.Overlay}):[]},f=function(e,t){if(!t||!e.length)return{};var n={},r=function(e){return n[e.id]||(n[e.id]={step:e,before:new Set,after:new Set}),n[e.id]};return e.forEach(function(n){var o=r(n);v(e,n,t).forEach(function(e){var t=r(e);!l()(e,n)&&(o.after.add(e),t.before.add(n))})}),Object.values(n).forEach(function(e){e.after.forEach(function(t){e.before.delete(t)})}),Object.keys(n).reduce(function(e,t){return e[t]={step:n[t].step,before:Array.from(n[t].before).reverse(),after:Array.from(n[t].after)},e},{})},v=function(e,t,n){for(var r=function(r){var o=new Set;l.forEach(function(l){var a=e.find(function(e){return e.id===l});a&&(t.id!==l&&i.set(l,a),r<n)&&h(e,a).forEach(function(e){o.add(e.id)})}),l=Array.from(o)},i=new Map,l=[t.id],a=0;a<=n;a++)r(a);return Array.from(i.values()).filter(function(e){return e.type!==o.StepType.Empty&&!e.videoProcessing})},h=function(e,t){var n,r=new Set,o=null;if(t.targetId&&t.targetId!==u.xv)o=null!==(n=e.find(function(e){var n=e.id;return t.targetId===n}))&&void 0!==n?n:null;else{var i=e.findIndex(function(e){var n=e.id;return t.id===n});o=g(e,i)}return o&&r.add(o),t.hotspots&&Array.isArray(t.hotspots)?t.hotspots.forEach(function(n){var o,i=null;if(n.targetId&&n.targetId!==u.xv)i=null!==(o=e.find(function(e){var t=e.id;return n.targetId===t}))&&void 0!==o?o:null;else{var l=e.findIndex(function(e){var n=e.id;return t.id===n});i=g(e,l)}i&&r.add(i)}):t.paths&&Array.isArray(t.paths)&&t.paths.forEach(function(n){var o=null;if("step"===n.pathType){if(n.targetStepId&&n.targetStepId!==u.xv)o=null!==(i=e.find(function(e){var t=e.id;return n.targetStepId===t}))&&void 0!==i?i:null;else{var i,l=e.findIndex(function(e){var n=e.id;return t.id===n});o=g(e,l)}o&&r.add(o)}}),Array.from(r)},g=function(e,t){if(t>=e.length-1)return null;var n=e[t+1];return n&&n.type!==o.StepType.Empty?n:g(e,t+1)},m=function(e){if(!e.length)return[];var t=(0,s.kB)(e);return t?[t,].concat((0,r.Z)(v(e,t,2*e.length))):[]}},15529:function(e,t,n){n.d(t,{q:function(){return o}});var r=n(33252),o=function(e){if(e){var t=!0,n=!1,o=void 0;try{for(var i,l=e.steps[Symbol.iterator]();!(t=(i=l.next()).done);t=!0){var a=i.value,s=!0,u=!1,c=void 0;try{for(var d,p=a.hotspots[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var f=d.value;if(f&&f.bgColor)return{buttonBgColor:f.bgColor,buttonFgColor:f.textColor||r.defaultUserPrefs.textColor}}}catch(v){u=!0,c=v}finally{try{s||null==p.return||p.return()}finally{if(u)throw c}}}}catch(h){n=!0,o=h}finally{try{t||null==l.return||l.return()}finally{if(n)throw o}}}return{buttonBgColor:r.defaultUserPrefs.bgColor,buttonFgColor:r.defaultUserPrefs.textColor}}}}]);